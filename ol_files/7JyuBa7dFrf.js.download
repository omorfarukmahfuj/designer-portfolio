;/*FB_PKG_DELIM*/

__d("GroupsCometCoverPhotoPickerDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7192251780826661"}),null);
__d("useCometOnScroll",["BaseScrollableAreaContext","HiddenSubtreePassiveContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useLayoutEffect;function a(a){var b=j(c("HiddenSubtreePassiveContext")),d=j(c("BaseScrollableAreaContext")),e=i(function(){return d.length>0?d[d.length-1].getDOMNode():window},[d]),f=i(function(){var a=e();return a==null?{left:0,top:0}:a instanceof HTMLElement?{left:a.scrollLeft,top:a.scrollTop}:{left:a.scrollX,top:a.scrollY}},[e]);k(function(){var c=e();if(c==null)return;var d=function(){if(b.getCurrentState().hiddenOrBackgrounded)return;var d=c instanceof HTMLElement?{left:c.scrollLeft,top:c.scrollTop}:{left:c.scrollX,top:c.scrollY};a(d)},f=b.subscribeToChanges(function(a){a.hiddenOrBackgrounded||d()});c.addEventListener("scroll",d,{passive:!0});return function(){c.removeEventListener("scroll",d,{passive:!0}),f.remove()}},[e,b,a]);return f}g["default"]=a}),98);
__d("useCometFeedRefreshPillManagerImpl",["CometFeedFetchTracker","CometFeedStalenessConstants","CometUserActivityMonitor","HiddenSubtreePassiveContext","promiseDone","qex","react","requireDeferred","useCometOnScroll"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState,n=c("requireDeferred")("CometFeedRefreshPillFalcoEvent").__setRef("useCometFeedRefreshPillManagerImpl");e=360;var o=(f=c("qex")._("239"))!=null?f:e,p=(b=c("qex")._("420"))!=null?b:40,q=60,r=40,s=300,t=(f=c("qex")._("385"))!=null?f:!1;function a(){var a=m(!1),b=a[0],e=a[1],f=l(null),g=l(null),h=l(null),u=l(null),v=j(c("HiddenSubtreePassiveContext")),w=i(function(){if(b||f.current!=null)return!1;var a=d("CometFeedFetchTracker").getIsFeedFetched(),c=d("CometFeedFetchTracker").getLastHeadloadTime();if(!a||c==null)return!1;a=Date.now()-c;if(a<o*1e3)return!1;c=d("CometFeedFetchTracker").getLastCachedRefreshTime();return c!=null&&Date.now()-c<q*1e3?!1:!0},[b]),x=i(function(a,b){var i=d("CometFeedFetchTracker").getLastHeadloadTime();c("promiseDone")(n.load().then(function(c){return c.log(function(){return{event_type:"impression",time_since_last_activity:b!=null?b.toString():void 0,time_since_last_headload:i!=null?(Date.now()-i).toString():void 0,trigger_type:a}})}));e(!0);g.current=Date.now();h.current=a;u.current=b;f.current=window.scrollY},[]),y=l(window.scrollY);a=i(function(a){if(a.top<r){e(!1);return}if(t){b&&f.current!=null&&a.top>y.current?e(!1):!b&&f.current!=null&&a.top<y.current&&e(!0);y.current=a.top;return}b&&f.current!=null&&a.top>f.current+s&&e(!1);!b&&f.current!=null&&a.top<=f.current&&e(!0)},[b]);c("useCometOnScroll")(a);var z=l(Date.now());k(function(){var a=d("CometUserActivityMonitor").subscribe(function(a){if(a==="INACTIVE")z.current=Date.now();else if(a==="ACTIVE"){a=Date.now()-z.current;if(a<p*1e3)return;if(a>d("CometFeedStalenessConstants").FEED_STALE_TIMEOUT)return;!v.getCurrentState().hiddenOrBackgrounded&&w()&&x("inactivity",a)}});return function(){return a.remove()}},[w,v,b,x]);a=i(function(){f.current=null,e(!1)},[]);var A=i(function(){var a=d("CometFeedFetchTracker").getLastHeadloadTime();c("promiseDone")(n.load().then(function(b){return b.log(function(){var b;return{event_type:"click",time_since_last_activity:((b=u.current)!=null?b:0).toString(),time_since_last_headload:a!=null?(Date.now()-a).toString():void 0,time_since_trigger:(Date.now()-((b=g.current)!=null?b:Date.now())).toString(),trigger_type:h.current}})}))},[]);return{onClickRefreshPill:A,resetRefreshPill:a,showRefreshPill:b}}g["default"]=a}),98);